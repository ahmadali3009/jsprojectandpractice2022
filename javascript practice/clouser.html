<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    hello world
    <!-- <script>
        function buildFunctions() {
  let funcs = [];

  for (var i = 0; i < 3; i++) {
    funcs.push(function () {
      console.log(i);
    });
  }
  console.log(funcs);
  return funcs;
}
const fnList = buildFunctions();

fnList[0](); // ?
fnList[1](); // ?
fnList[2](); // ?
</script>

<script> 
  function createcounter(countpass) {
    let count = countpass;
    let initial = count;
    return {
      increment: function () {
        count++;
        return count;
      },
      decrement: function () {
        count--;
        return count;
      },
      getCount: function () {
        return count;
      },
      reset: function () {
        count = initial;
      }
    }
  }
  const counter = createcounter(100);
  console.log(counter.increment()); // 101
  console.log(counter.increment()); // 102
  console.log(counter.decrement()); // 101
  console.log(counter.getCount()); // 101
  counter.reset();
  console.log(counter.getCount()); // 100
</script> -->
<!-- <script>
   async function apicall (delay = 2000 , retrive = 3){
            console.log("Fetching data... This will retry up to", retrive, "times with a delay of", delay, "ms");
            // Simulating a network request
            // Replace with actual API call 
        let res = await fetch("https://jsonplaceholder.typicode.om/posts?_limit=5" );
            let data = await res.json();
            console.log(data , "api data");
            if(!res.ok){
                throw new Error("Network response was not ok");
            }
            console.error("Error fetching data:", error);
            if (retrive > 0) {
                setTimeout(() => {
                    apicall(delay, retrive - 1);
                }, delay);
            }
        console.log("API call completed");
      }

    function checksettimeout() {
        setTimeout(async () => {
          fetch("https://jsonplaceholder.typicode.com/posts?_limit=5")
          .then(res => res.json())
          .then(data1 => {
            console.log(data1, "setTimeout data");
            return fetch("https://jsonplaceholder.typicode.com/ps?_limit=2");
          })
          .then(res => res.json())
          .then(data2 => {
            console.log(data2, "setTimeout data 2");
            return fetch("https://jsonplaceholder.typicode.com/posts?_limit=3");
          })
          .then(res => res.json())
          .then(data3 => {
            console.log(data3, "setTimeout data 3");
          })
          .catch(error => {
            console.error("Error in setTimeout fetch:", error);
          });
        }, 2000);
  }
   console.log("1. Start");

checksettimeout();

console.log("2. After checksettimeout");

  apicall();


console.log("3. After apicall");
    -->
<!-- </script> -->
<!-- object and this keyword -->
 <script>
  // age = 20;
  // const person = {
  //   name: "John",
  //   age: 30,
  //   greet: function() {
  //     console.log("Hello, my name is " + this.name);
  //     let self = this; // 'this' refers to the person object
  //     return function() {
  //       console.log("This is a nested function, referring to age " + self.age);
  //     };
  //   }
  // };
  // name = "global name jane";
  // const person2 = {
  //   name: "Jane",
  //   age: 25,
  //   greet: ()=>{
  //     console.log("Hello, my name is " + this.name);
  //   }
    
  // };

  // let greet1 = person.greet(); // "Hello, my name is John"
  // greet1(); // "This is a nested function, referring to age undefined"
  // person2.greet(); // "Hello, my name is Jane"
 </script>
 <script>
//   const person = {
//   name: "Ahmad",
//   greet: function () {
//     console.log("1:", this.name); // ?

//     function name() {
//       console.log("2:", this.name); // ?
//     };

//     setTimeout(() => {
//       console.log("3:", this.name); // ?
//     }, 2000);
//   },
// };
// person.greet(); // "1: Ahmad", "2: undefined", "3: Ahmad"
 </script>
<script>
  const user = {
  name: "Ahmad",
  showName: function () {
    console.log(this.name);
  },
};

const show = user.showName.bind(user); // Ahmad
console.log(show); // ?
show(); // ?

const boundShow = user.showName.bind(user);
boundShow(); // ?

function showAge(age) {
  console.log(`${this.name} is ${age} years old`);
}

const person = { name: "Ahmad" };
showAge.call(person, 25); // Ahmad is 25 years old

</script>

<script>
  //createing the custom bind function
  function map(arr , callback){
    let newArr = [];
    if(!Array.isArray(arr)){
      throw new Error("First argument must be an array");
    }
    for(let i=0; i < arr.length; i++)
    {
      console.log(callback(arr[i], i, arr));
      newArr.push(callback(arr[i], i, arr));
    }
    return newArr;
  }

  map([1, 2, 3], (element , index)=> element * 2);

  function filter(arr , callback , thisarg)
  {
    let newarr = [];
    if(!Array.isArray(arr)){
      throw new Error("First argument must be an array");
    }
    if(callback === undefined || typeof callback !== 'function'){
      throw new Error("Second argument must be a function");
    }
    for(let i=0; i<arr.length; i++)
     if(i in arr)
     {
      let passestest = thisarg ? callback.call(thisarg, arr[i] , i ,arr) : callback(arr[i] , i , arr);
      if(passestest)
      {
        newarr.push(arr[i]);
      }
     }
     console.log(newarr);
    return newarr;
  }

  filter([1, 2, 3, 4, 5], (element) => element > 2);
  
</script>



</body>
</html>
